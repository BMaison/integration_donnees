<!DOCTYPE html>
<html>
<head>
    <title> Carte de chaleur </title>
    <meta charset="utf-8" />
    <link 
        rel="stylesheet" 
        href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css"
    />
</head>
<body>
    <div id="map" style="width: 1800px; height: 700px"></div>

    <script
       src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js">
    </script>
    
    <script
       src="http://leaflet.github.io/Leaflet.heat/dist/leaflet-heat.js">
    </script>
         <script src="http://d3js.org/d3.v4.min.js"></script>
    <script>

        
var map = L.map('map').setView([-41.5546,174.146], 10);
        mapLink = 
            '<a href="http://openstreetmap.org">OpenStreetMap</a>';
        L.tileLayer(
            'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; ' + mapLink + ' Contributors',
            maxZoom: 18,
        }).addTo(map);
        
      d3.json("https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson", function(error, eqs) {
    var heatMapData = [];
    eqs.features.forEach(function(d) {
        heatMapData.push(new L.latLng(
            +d.geometry.coordinates[1], 
            +d.geometry.coordinates[0],
            +d.properties.title.substring(2, 5) / 10));
    });
 
    var heatLayer = L.heatLayer(heatMapData, {maxZoom: 12});
    map.addLayer(heatLayer);
    });
 
    </script>
</body>
</html>